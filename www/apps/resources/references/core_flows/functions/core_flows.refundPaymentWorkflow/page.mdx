import { TypeList, WorkflowDiagram } from "docs-ui"

# refundPaymentWorkflow

This workflow refunds a payment.

## Steps

<WorkflowDiagram workflow={{"name":"refundPaymentWorkflow","steps":[{"type":"step","name":"useRemoteQueryStep","description":"This step fetches data across modules using the remote query.\n\nLearn more in the [Remote Query documentation](https://docs.medusajs.com/learn/advanced-development/module-links/query).\n\n:::note\n\nThis step is deprecated. Use [useQueryGraphStep](../core_flows.useQueryGraphStep/page.mdx) instead.\n\n:::\n\n","link":"../../Steps_Common/functions/core_flows.Steps_Common.useRemoteQueryStep/page.mdx","depth":1},{"type":"step","name":"useRemoteQueryStep","description":"This step fetches data across modules using the remote query.\n\nLearn more in the [Remote Query documentation](https://docs.medusajs.com/learn/advanced-development/module-links/query).\n\n:::note\n\nThis step is deprecated. Use [useQueryGraphStep](../core_flows.useQueryGraphStep/page.mdx) instead.\n\n:::\n\n","link":"../../Steps_Common/functions/core_flows.Steps_Common.useRemoteQueryStep/page.mdx","depth":2},{"type":"step","name":"useRemoteQueryStep","description":"This step fetches data across modules using the remote query.\n\nLearn more in the [Remote Query documentation](https://docs.medusajs.com/learn/advanced-development/module-links/query).\n\n:::note\n\nThis step is deprecated. Use [useQueryGraphStep](../core_flows.useQueryGraphStep/page.mdx) instead.\n\n:::\n\n","link":"../../Steps_Common/functions/core_flows.Steps_Common.useRemoteQueryStep/page.mdx","depth":3},{"type":"step","name":"validateRefundStep","description":"This step validates that the refund is valid for the order","link":"../../Workflows_Payment/functions/core_flows.Workflows_Payment.validateRefundStep/page.mdx","depth":4},{"type":"step","name":"refundPaymentStep","description":"This step refunds a payment.","link":"../../Steps_Payment/functions/core_flows.Steps_Payment.refundPaymentStep/page.mdx","depth":5},{"type":"when","condition":"{\n      return !!orderPaymentCollection?.order?.id\n    }","depth":"6","steps":[{"type":"step","name":"addOrderTransactionStep","description":"This step creates order transactions.","link":"../../Steps_Order/functions/core_flows.Steps_Order.addOrderTransactionStep/page.mdx","depth":6}]},{"type":"step","name":"emitEventStep","description":"Emit an event.\n\n","link":"../../Steps_Common/functions/core_flows.Steps_Common.emitEventStep/page.mdx","depth":7}]}} />

## Input

<TypeList types={[{"name":"payment_id","type":"`string`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"created_by","type":"`string`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]},{"name":"amount","type":"[BigNumberInput](../../../types/types/types.BigNumberInput/page.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"value","type":"`string` \\| `number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"numeric","type":"`number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]},{"name":"raw","type":"[BigNumberRawValue](../../../types/types/types.BigNumberRawValue/page.mdx)","description":"","optional":true,"defaultValue":"","expandable":false,"children":[{"name":"value","type":"`string` \\| `number`","description":"","optional":false,"defaultValue":"","expandable":false,"children":[]}]},{"name":"bigNumber","type":"`BigNumber`","description":"","optional":true,"defaultValue":"","expandable":false,"children":[]}]}]} expandUrl="https://docs.medusajs.com/learn/fundamentals/data-models/manage-relationships#retrieve-records-of-relation" sectionTitle="refundPaymentWorkflow"/>
